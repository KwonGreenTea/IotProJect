<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <title>관리자 | 상품 목록</title>
  <link rel="stylesheet" href="/css/shop.css" />
  <script type="module">
    import { fetchProducts } from "/js/shop.js";
    window.addEventListener('DOMContentLoaded', async ()=>{
      const res = await fetchProducts();
      const root = document.querySelector('#root');
      if(res.length===0){
        root.innerHTML = `<p>등록된 상품이 없습니다.</p>`;
        return;
      }
      root.innerHTML = `
        <table class="table">
          <thead><tr><th>이름</th><th>가격</th><th>임계(℃/%)</th><th>비고</th></tr></thead>
          <tbody>
            ${res.map(p=>`
              <tr>
                <td>${p.name}</td>
                <td>${Number(p.price||0).toLocaleString()}원</td>
                <td>${p.thresholdTemp ?? '-'} / ${p.thresholdHumid ?? '-'}</td>
                <td><a href="/shop/${p.id}">상세</a></td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
    });
  </script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>상품 목록(관리자)</h1>
      <div class="toolbar">
        <a class="btn" href="/admin/products/register">상품 등록</a>
        <a class="btn secondary" href="/admin/orders">주문 관리</a>
      </div>
    </div>
    <div id="root"></div>
  </div>
</body>
</html>
