<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<meta th:name="viewport" content="width=device-width, initial-scale=1.0">
<title>센서 데이터 테스트</title>

</style>
</head>
<body>

	<h1>센서 데이터 테스트</h1>

	<table id="sensorTable" border="1">
	    <thead>
	        <tr>
	            <th>번호</th>
	            <th>data1</th>
	            <th>data2</th>
	            <th>data3</th>
	            <th>sensorCd</th>
	        </tr>
	    </thead>
	    <tbody>
	    </tbody>
	</table>

	<script>
		const eventSource = new EventSource("/data/stream");
	
		eventSource.addEventListener("newData", function(event) {
		    const data = JSON.parse(event.data);
		    const tbody = document.querySelector('#sensorTable tbody');
		    const newRow = `
		        <tr>
		            <td>NEW</td>
		            <td>${data.data1}</td>
		            <td>${data.data2}</td>
		            <td>${data.data3}</td>
		            <td>${data.sensorCd}</td>
		        </tr>
		    `;
		    tbody.innerHTML = newRow + tbody.innerHTML; // 위로 추가
		});
	</script>

</body>
</html>



