<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Market Home</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* 크리스마스 커스텀 테마 (기존과 동일) */
        :root {
            --xmas-red: #D42426;
            --xmas-dark: #1A1A1A;
            --xmas-bg: #F8F9FA;
        }

        body {
            background-color: var(--xmas-bg);
            color: var(--xmas-dark);
            padding-bottom: 80px; /* 모바일 하단 네비게이션 공간 확보 */
        }

        .navbar-custom { background-color: var(--xmas-red); }
        .navbar-brand, .nav-link { color: white !important; font-weight: 600; }

        .product-card {
            border: 1p	x solid #ddd;
            transition: transform 0.2s;
            background: white;
            height: 100%;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--xmas-red);
        }

        .spec-badge {
            font-size: 0.75rem;
            background-color: #f1f1f1;
            color: #555;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 4px;
            margin-bottom: 4px;
            display: inline-block;
        }

        .mobile-bottom-nav {
            background-color: white;
            border-top: 1px solid #eee;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        .mobile-nav-item {
            color: var(--xmas-dark);
            text-decoration: none;
            font-size: 0.8rem;
        }
        .mobile-nav-item.active { color: var(--xmas-red); }
        
        .price-tag {
            color: var(--xmas-red);
            font-weight: bold;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-custom sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fa-solid fa-snowflake me-2"></i>MERRY SHOP</a>
            
            <div class="collapse navbar-collapse d-none d-lg-block" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#">검색</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">주문 목록</a></li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="fa-solid fa-cart-shopping me-1"></i>장바구니</a></li>
                    <li class="nav-item"><a class="nav-link btn btn-dark text-white ms-3 px-3 rounded-pill" href="#">로그아웃</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        
        <div class="p-4 p-md-5 mb-4 rounded text-bg-dark d-flex align-items-center justify-content-between" 
             style="background: linear-gradient(45deg, #1a1a1a, #2c2c2c);">
            <div>
                <h1 class="display-5 fw-bold text-danger">Holiday Sale</h1>
                <p class="col-md-8 fs-5">따뜻한 겨울을 위한 최고의 선택. <br>최적의 온도와 습도를 맞춰주는 스마트 상품들을 만나보세요.</p>
            </div>
            <div class="d-none d-md-block">
                <i class="fa-solid fa-gift fa-5x text-danger"></i>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold border-start border-4 border-danger ps-3 mb-0">추천 상품</h3>
            <span class="text-muted">전체보기 <i class="fa-solid fa-chevron-right"></i></span>
        </div>

        <div class="row g-3">
            
            <div th:if="${#lists.isEmpty(productList)}" class="col-12 text-center py-5">
                <p class="text-muted">현재 등록된 상품이 없습니다.</p>
            </div>

			<div class="col-6 col-lg-3" th:each="product : ${productList}">
			    <div class="card product-card h-100">
			        
			        <a th:href="@{/productList/{id}(id=${product.productId})}" class="text-decoration-none text-dark">
			            <img th:src="|https://placehold.co/300x300/f8f9fa/D42426?text=${product.productName}|" 
			                 class="card-img-top" 
			                 th:alt="${product.productName}">
			        </a>
			        
			        <div class="card-body d-flex flex-column">
			            <small class="text-muted mb-1">
			                <i class="fa-solid fa-shop"></i> <span th:text="${product.sellerId}">판매자</span>
			            </small>
			            
			            <a th:href="@{/productList/{id}(id=${product.productId})}" class="text-decoration-none text-dark">
			                <h5 class="card-title text-truncate" th:text="${product.productName}">상품명</h5>
			            </a>
			           
			            <div class="mb-2">
			                <span class="spec-badge">
			                    <i class="fa-solid fa-temperature-half"></i> 
			                    <span th:text="|${product.minTemperature}°C ~ ${product.maxTemperature}°C|"></span>
			                </span>
			                <span class="spec-badge">
			                    <i class="fa-solid fa-droplet"></i> 
			                    <span th:text="|${product.minHumidity}% ~ ${product.maxHumidity}%|"></span>
			                </span>
			            </div>
						<button type="button" 
						        class="btn btn-outline-danger rounded-circle shadow-sm d-flex justify-content-center align-items-center"
						        style="width: 35px; height: 35px; padding: 0;"
						        th:onclick="addToCart([[${product.productId}]])">
						    <i class="fa-solid fa-cart-plus"></i>
						</button>
			        </div>
			    </div>
			</div>>
            </div> </div>

    <nav class="mobile-bottom-nav fixed-bottom d-lg-none">
        <div class="container-fluid">
            <div class="row text-center py-2">
                <div class="col-3">
                    <a href="#" class="mobile-nav-item active d-flex flex-column align-items-center">
                        <i class="fa-solid fa-house fs-5 mb-1"></i><span>홈</span>
                    </a>
                </div>
                <div class="col-3">
                    <a href="#" class="mobile-nav-item d-flex flex-column align-items-center">
                        <i class="fa-solid fa-magnifying-glass fs-5 mb-1"></i><span>검색</span>
                    </a>
                </div>
                <div class="col-3">
                    <a href="#" class="mobile-nav-item d-flex flex-column align-items-center">
                        <i class="fa-solid fa-list-check fs-5 mb-1"></i><span>주문</span>
                    </a>
                </div>
                <div class="col-3">
                    <a href="#" class="mobile-nav-item d-flex flex-column align-items-center">
                        <i class="fa-solid fa-cart-shopping fs-5 mb-1"></i>
                        <span class="position-relative">장바구니
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6rem;">2</span>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </nav>
	
	<div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
	    <div class="modal-dialog modal-dialog-centered">
	        <div class="modal-content">
	            <div class="modal-header border-0">
	                <h5 class="modal-title fw-bold"><i class="fa-solid fa-check-circle text-success me-2"></i>알림</h5>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	            </div>
	            <div class="modal-body text-center py-4">
	                <p class="mb-0 fs-5">상품이 장바구니에 담겼습니다!</p>
	            </div>
	            <div class="modal-footer border-0 justify-content-center gap-2">
	                <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">계속 쇼핑하기</button>
	                <a href="/cart" class="btn btn-danger px-4">장바구니 이동</a>
	            </div>
	        </div>
	    </div>
	</div>

	<script>
	    function addToCart(productId) {
	        // 실제로는 여기서 fetch('/cart/add', ...) 로 서버에 DB 저장을 요청해야 합니다.
	        // 현재는 UI 동작 확인을 위해 성공했다고 가정하고 모달만 띄웁니다.
	        
	        console.log("장바구니 담기 시도: Product ID " + productId);
	        
	        // 부트스트랩 모달 띄우기
	        const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
	        cartModal.show();
	    }
	</script>
	
	
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>